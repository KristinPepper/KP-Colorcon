{"MultiTouchAttribution_Campaign_Node":{"action":"sfdcDigest","parameters":{"fields":[{"name":"Name"},{"fiscalMonthOffset":0,"name":"StartDate"},{"fiscalMonthOffset":0,"name":"EndDate"},{"name":"Id"},{"defaultValue":"0","name":"ActualCost"},{"defaultValue":"0","name":"BudgetedCost"},{"name":"Type"}],"object":"Campaign"}},"filter_AccountId":{"action":"filter","parameters":{"source":"compute_AccountIdMatch","saqlFilter":"DoesAccountIdMatch == \"Yes\""}},"MultiTouchAttribution_Campaign_Influence_Node":{"action":"sfdcDigest","parameters":{"fields":[{"name":"CampaignId"},{"name":"ModelId"},{"defaultValue":"-BLANK-","name":"ContactId"},{"name":"OpportunityId"},{"name":"RevenueShare"},{"fiscalMonthOffset":0,"name":"LastModifiedDate"}],"object":"CampaignInfluence"}},"Influence_Model_Dataset":{"action":"sfdcRegister","parameters":{"name":"Campaign Influence Models","alias":"pdCiModel2","source":"MultiTouchAttribution_Campaign_Influence_Model_Node"}},"sdfc_Digest_User_EWCUA":{"action":"sfdcDigest","parameters":{"fields":[{"name":"Name"},{"name":"Id"},{"name":"CreatedDate"}],"object":"User"}},"MultiTouchAttribution_Campaign_Influence_Campaign_Join":{"action":"augment","parameters":{"right_key":["Id"],"left":"MultiTouchAttribution_Campaign_Influence_Node","left_key":["CampaignId"],"right_select":["Name","StartDate","EndDate","ActualCost","BudgetedCost","Type"],"right":"MultiTouchAttribution_Campaign_Node","relationship":"CampaignId"}},"compute_AccountIdMatch":{"action":"computeExpression","parameters":{"source":"augment_PardotActivity_pdProspect","mergeWithSource":true,"computedFields":[{"name":"DoesAccountIdMatch","saqlExpression":"case when AccountExternalId == 'Prospect.pardot_account_id' then \"Yes\" else \"No\" end","label":"DoesAccountIdMatch","type":"Text"}]}},"augment_PardotActivity_pdProspect":{"action":"augment","parameters":{"right_key":["id"],"left":"PardotEngagement","left_key":["ActorExternalId"],"right_select":["source_campaign","created_by_last_name","source","id","state","fax","job_title","zip","is_do_not_call","opted_out","created_by_first_name","crm_owner_fid","tags","updated_by_last_name","assigned_user_last_name","full_name","is_archived","assigned_user_first_name","phone","grade","is_do_not_email","salutation","employees","annual_revenue","pardot_account_id","city","crm_contact_fid","industry","assigned_user_full_name","account_name","years_in_business","department","country","first_name","email","company","crm_lead_fid","website","comments","created_by_full_name","updated_by_first_name","last_name","address_two","address_one","territory","score","assigned_date","crm_last_activity_date","last_activity_date","updated_at_date","created_at_date"],"right":"pdProspect","relationship":"Prospect","operation":"LookupSingleValue"}},"sfdcDigest_Event_EWCUA":{"action":"sfdcDigest","parameters":{"fields":[{"name":"AccountId"},{"name":"EventSubtype"},{"name":"Id"},{"name":"Type"},{"fiscalMonthOffset":0,"name":"StartDateTime"},{"name":"DurationInMinutes"},{"name":"WhoId"},{"name":"OwnerId"},{"name":"CreatedDate"}],"object":"Event"}},"sfdcDigest_Opportunity_OA":{"action":"sfdcDigest","parameters":{"fields":[{"name":"Amount"},{"name":"Id"},{"name":"AccountId"},{"name":"StageName"},{"fiscalMonthOffset":0,"name":"CloseDate"},{"name":"IsClosed"},{"name":"IsWon"},{"name":"Name"},{"name":"CreatedDate"}],"object":"Opportunity"}},"augment_User_OA":{"action":"augment","parameters":{"right_key":["Id"],"left":"augment_Opportunity_Account_OA","left_key":["AccountId.OwnerId"],"right_select":["Name","CreatedDate"],"right":"sdfc_Digest_User_EWCUA","relationship":"AccountId.OwnerId"}},"MultiTouchAttribution_Dataset":{"action":"sfdcRegister","parameters":{"name":"Multi-Touch Attribution","alias":"pdMultiAttrib2","source":"MultiTouchAttribution_Campaign_Influence_Opportunity_Account_Join"}},"pdProspect":{"action":"edgemart","parameters":{"alias":"pdProspect2"}},"augment_Contact_Account_CWA":{"action":"augment","parameters":{"right_key":["Id"],"left":"sfdcDigest_Contact_CWA","left_key":["AccountId"],"right_select":["Name","CreatedDate"],"right":"sfdcDigest_Account_CWA","relationship":"AccountId"}},"sfdcDigest_Account_CWA":{"action":"sfdcDigest","parameters":{"fields":[{"name":"Name"},{"name":"OwnerId"},{"name":"Industry"},{"name":"Id"},{"name":"CreatedDate"}],"object":"Account"}},"sfdcDigest_Contact_CWA":{"action":"sfdcDigest","parameters":{"fullRefreshToken":"","incremental":false,"fields":[{"name":"AccountId"},{"name":"Id"},{"name":"FirstName"},{"name":"LastName"},{"name":"Name"},{"fiscalMonthOffset":0,"name":"LastActivityDate"},{"name":"pi__grade__c"},{"name":"LeadSource"},{"name":"Title"},{"name":"pi__score__c"},{"name":"CreatedDate"}],"object":"Contact"}},"MultiTouchAttribution_Campaign_Influence_Model_Join":{"action":"augment","parameters":{"right_key":["Id"],"left":"MultiTouchAttribution_Campaign_Influence_Campaign_Join","left_key":["ModelId"],"right_select":["MasterLabel"],"right":"MultiTouchAttribution_Campaign_Influence_Model_Node","relationship":"ModelId"}},"register_SalesforceEventsWithContactUserAndAccount_EWCUA":{"action":"sfdcRegister","parameters":{"name":"ABM Events","alias":"pdAbmEvent2","source":"augment_Contact_EWCUA"}},"slice_ProspectActivity":{"action":"sliceDataset","parameters":{"mode":"drop","source":"filter_AccountId","fields":[{"name":"AccountExternalId"},{"name":"DoesAccountIdMatch"}]}},"MultiTouchAttribution_Campaign_Influence_Contact_Join":{"action":"augment","parameters":{"right_key":["Id"],"left":"MultiTouchAttribution_Campaign_Influence_Model_Join","left_key":["ContactId"],"right_select":["FirstName","Name","LastName","LeadSource"],"right":"sfdcDigest_Contact_CWA","relationship":"ContactId"}},"MultiTouchAttribution_Campaign_Influence_Model_Node":{"action":"sfdcDigest","parameters":{"fields":[{"name":"MasterLabel"},{"name":"Id"}],"object":"CampaignInfluenceModel"}},"PardotEngagement":{"action":"edgemart","parameters":{"alias":"Pardot_Activity"}},"MultiTouchAttribution_Campaign_Influence_Opportunity_Join":{"action":"augment","parameters":{"right_key":["Id"],"left":"MultiTouchAttribution_Campaign_Influence_Contact_Join","left_key":["OpportunityId"],"right_select":["AccountId","StageName","IsClosed","IsWon","Name"],"right":"sfdcDigest_Opportunity_OA","relationship":"OpportunityId"}},"register_SF_Opportunities_with_Account_OA":{"action":"sfdcRegister","parameters":{"name":"ABM Opportunities","alias":"pdAbmOpp2","source":"augment_User_OA"}},"register_SF_Contacts_and_Account_CWA":{"action":"sfdcRegister","parameters":{"name":"ABM Contacts","alias":"pdAbmContact2","source":"augment_Contact_Account_CWA"}},"augment_Event_Account_EWCUA":{"action":"augment","parameters":{"right_key":["Id"],"left":"augment_Account_User_EWCUA","left_key":["AccountId"],"right_select":["Id","Name","CreatedDate"],"right":"sfdcDigest_Account_CWA","relationship":"AccountId","operation":"LookupSingleValue"}},"augment_Contact_EWCUA":{"action":"augment","parameters":{"right_key":["Id"],"left":"augment_Event_Account_EWCUA","left_key":["WhoId"],"right_select":["Name","pi__grade__c","Title","pi__score__c","Id","CreatedDate"],"right":"sfdcDigest_Contact_CWA","relationship":"WhoId","operation":"LookupSingleValue"}},"augment_Account_User_EWCUA":{"action":"augment","parameters":{"right_key":["Id"],"left":"sfdcDigest_Event_EWCUA","left_key":["OwnerId"],"right_select":["Name","Id","CreatedDate"],"right":"sdfc_Digest_User_EWCUA","relationship":"OwnerId","operation":"LookupSingleValue"}},"augment_Opportunity_Account_OA":{"action":"augment","parameters":{"right_key":["Id"],"left":"compute_OpportunityStatus","left_key":["AccountId"],"right_select":["Name","OwnerId","Industry","CreatedDate"],"right":"sfdcDigest_Account_CWA","relationship":"AccountId"}},"MultiTouchAttribution_Campaign_Influence_Opportunity_Account_Join":{"action":"augment","parameters":{"right_key":["Id"],"left":"MultiTouchAttribution_Campaign_Influence_Opportunity_Join","left_key":["OpportunityId.AccountId"],"right_select":["Name"],"right":"sfdcDigest_Account_CWA","relationship":"OpportunityId.AccountId"}},"register_pdProspectActivities":{"action":"sfdcRegister","parameters":{"name":"Prospect and Activity","alias":"pdProspectActivity2","source":"slice_ProspectActivity"}},"compute_OpportunityStatus":{"action":"computeExpression","parameters":{"source":"sfdcDigest_Opportunity_OA","mergeWithSource":true,"computedFields":[{"name":"OpportunityStatus","saqlExpression":"case \nwhen 'IsClosed' == \"false\" then \"Open\"\nwhen 'IsClosed' == \"true\" && 'IsWon' == \"true\" then \"Closed Won\"\nwhen 'IsClosed' == \"true\" && 'IsWon' == \"false\" then \"Closed Lost\"\nend","label":"Opportunity Status","type":"Text"}]}}}